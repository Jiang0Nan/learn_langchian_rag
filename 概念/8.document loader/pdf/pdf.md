## PDF
### PDF是社么
**可移植文档格式 （PDF） 标准化为 ISO 32000**，是 Adobe 于 1992 年开发的一种文件格式 ，用于以独立于应用程序软件 、 硬件和作系统的方式呈现文档 ，包括文本格式和图像。
- 基于 PostScript 语言，每个 PDF 文件都封装了固定布局平面文档的完整描述，包括文本、 字体 、 矢量图形 、 光栅图像和其他显示它所需的信息。
- PDF 起源于 Adobe 联合创始人 John Warnock 于 1991 年发起的“The Camelot Project”。
- PDF 于 2008 年标准化为 ISO 32000 它由 ISO TC 171 SC 2 WG8 维护，PDF 协会是该委员会的管理人。
- 最后一版 ISO 32000-2：2020 于 2020 年 12 月发布。
### 特点
- 文件格式： PDF（便携式文档格式）是一种由 Adobe 开发的文件格式，用于以独立于应用程序、硬件和操作系统的方式呈现文档，包括文本格式和图像。
- 开发历史： PDF 起源于 1991 年 Adobe 联合创始人 John Warnock 发起的“Camelot 项目”，并于 2008 年标准化为 ISO 32000。
- 内容： PDF 文件可以包含文本、图形、图像、音频、视频、表单和 3D 对象等多种内容。
- 技术细节： PDF 基于 PostScript 语言，并使用内容流、字体嵌入/替换系统和结构化存储系统等技术。
- 格式： PDF 文件使用 ASCII 字符进行组织，并包含对象、字典、流和索引表等元素。
- 图像模型： PDF 使用设备无关的笛卡尔坐标系来描述页面的表面，并支持矢量图形和光栅图像。
- 文本： PDF 中的文本由文本元素表示，并使用字体编码进行指定。
- 透明度： PDF 1.4 引入了透明度，允许对象与之前标记的对象交互以产生混合效果。
- 附加功能： PDF 支持逻辑结构、可访问性、可选内容组（图层）、加密、签名、文件附件、元数据、多媒体、表单等附加功能。
- 安全性： PDF 支持加密和数字签名，以提供安全身份验证和数据保护。
- 软件： 许多软件可以创建、编辑和查看 PDF 文件，包括 Adobe Acrobat、LibreOffice、Microsoft Office 等。
- 打印： PDF 可以用作打印作业格式，并可以直接打印到打印机。
- 可访问性： PDF 可以创建为残障人士可访问，并支持标签、等效文本、标题、音频描述等功能。
- 多媒体： PDF 可以包含图像、音频、视频内容，并可以创建交互式文档。
- 表单： PDF 支持交互式表单，允许用户输入数据并将其提交到服务器。
### 处理手段
- 通过启发式（经验）或 ML 推理将文本框聚合成行、段落和其他结构，步骤：
     -  分割
     - 表格、标题、列表识别
     - 提取内容
     - 根据经验或规则等进行合并
     - **缺点**：受文本质量的影响、复杂结构文本可能无法识别
     - **优点**：可以处理各种文本格式，pdf,word、可以提高文本处理的效率和准确性
- 对图像使用ocr技术检测文本，步骤：
     - 预处理图像，二值化、去噪等
     - 文字区域检测
     - 字符分割，将图像中的字符单独分割出来
     - 字符识别
     - 字符拼接
     - 后处理，对识别结果进行校正和优化（拼写校正：格式化：结构化输出）
     - **缺点**：受文本质量的影响、对复杂字体，手写体支持差、上下文理解不足导致识别出错误字符（看技术和方法）
     - **优点**：省力
- 将文本分类为段落，列表，表格或其他结构
- 将文本结构结构化为表行或者键值对

### 相关技术  

| 名称                             | 技术原理                  | 优点               | 缺点          | 适用场景        | 支持表格 | 支持图片 |
| ------------------------------ | --------------------- | ---------------- | ----------- | ----------- | ---- | ---- |
| **PyPDF / PyPDFDirectory**     | 解析 PDF 文本层            | 轻量稳定、支持批量加载      | 不支持图像/OCR   | 标准电子说明书     | 否    | 否    |
| **PDFPlumber**                 | 几何定位提取文本/表格           | 精准提取表格、段落清晰      | 图像不支持，稍慢    | 药品成分/用法说明   | 是    | 否    |
| **PDFMiner**                   | 字节流 + 字体级结构分析         | 精细控制、开发灵活        | 使用复杂、新手不友好  | 高级定制解析      | 是    | 否    |
| **PyMuPDF (fitz)**             | 高性能图文提取               | 快速、支持图像和坐标       | 表格识别略弱      | 图文混合说明书     | 是    | 是    |
| **PyMuPDF4LLM**                | PyMuPDF + Markdown 输出 | 自动分段结构、适合 RAG    | 依赖 PyMuPDF  | RAG 输入优化    | 是    | 是    |
| **Unstructured**               | LLM+NLP 结构分析          | 自动分块、智能结构化       | 初期配置复杂      | 文档格式杂乱时     | 是    | 是    |
| **Amazon Textract**            | 云端 OCR + 表格识别         | 精度高，支持扫描件        | 付费 + API 限制 | 扫描药品说明书     | 是    | 是    |
| **MathPix**                    | 数学公式 OCR              | 识别公式强            | 不适合文本提取     | 药理类教材或公式说明  | 否    | 是    |
| **PDFium2**                    | 底层 PDF 渲染             | 渲染强、可视化好         | 无结构提取能力     | 可视化/预览/图像提取 | 否    | 是    |
| **UpstageDocumentParseLoader** | LLM 分块加载              | 适配 LangChain RAG | 文档少、生态小     | RAG 结构化处理   | 是    | 是    |
| **Docling**                    | NLP 分块识别              | 自动结构识别           | 稳定性一般       | 说明书初步语义解析   | 是    | 是    |
 
### PyPDF的特点
只能够解析文本,无法得到图片等信息,但是处理地很好,因此如果只有文本的话这个技术是一个很好的技术

### unstructured 

表格图片文本都可以进行获取，并给出具体的定位，但是部署相对而言要麻烦一点  
总体来说unstructured还行，但是会有一定学习成本，暂时不深究，    
对于langchian-unstructured更多资料可以看看官网 https://python.langchain.com/docs/how_to/document_loader_pdf/#extracting-tables-and-other-structures   